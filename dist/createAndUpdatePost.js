(()=>{$(document).ready((function(){$("#summernote").summernote({height:550,minHeight:550,maxHeight:550,focus:!0,toolbar:[["fontname",["fontname"]],["fontsize",["fontsize"]],["style",["bold","italic","underline","strikethrough","clear"]],["color",["forecolor","color"]],["table",["table"]],["para",["ul","ol","paragraph"]],["insert",["link"]]]})}));const e=document.querySelector(".note-dropzone");e&&e.addEventListener("drop",(()=>{alert("사진 첨부 기능의 오류가 있습니다. 사진 삭제 부탁드립니다...")}));const t=document.querySelector("#real-input"),o=document.querySelector(".img-upload");var n=new FileReader;let a="";o&&o.addEventListener("click",(()=>{t.click(),t&&t.addEventListener("change",(e=>{const t=e.target.files[0];n.onload=e=>{const t=document.createElement("img");t.onload=function(e){let o=document.createElement("canvas"),n=o.getContext("2d"),l=t.width,r=t.height;l>r?l>300&&(r*=300/l,l=300):r>300&&(l*=300/r,r=300),o.witdh=l,o.height=r,n.drawImage(t,0,0,l,r);let c=o.toDataURL("image/png");a=c},t.src=e.target.result},n.readAsDataURL(t)}))}));const l=document.querySelector(".title-input"),r=document.querySelector("#summernote"),c=document.querySelector(".check--btn"),i=document.querySelector(".note-editable");if(localStorage.getItem("board_id")){const{id:e}=JSON.parse(localStorage.getItem("board_id"));c&&c.addEventListener("click",(()=>{axios.patch(`http://localhost:5000/board/${e}`,{title:l.value,content:i.value}).then((()=>{window.location.href="/index.html"}))}))}else c&&c.addEventListener("click",(async()=>{const{nickname:e}=JSON.parse(sessionStorage.getItem("loginInfo")),t={nickname:e,thumbnail:a,title:l.value,content:r.value};console.log(t),axios.post("http://localhost:5000/board",t).then((()=>{window.location.href="/index.html"}))}))})();